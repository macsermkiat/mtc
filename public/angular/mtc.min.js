(function(){angular.module("mtcApp").factory("mtcData",e);e.$inject=["$http","$log"];function e(e,t){var o=function(t){return e.get("/api/coaches/search/?text="+t)};var n=function(){return e.get("/api/allcoaches")};var r=function(){return e.get("/api/allcats")};var a=function(t){return e.post("/api/request",t)};var i=function(t){return e.get("/api/coaches/"+t)};var c=function(t){return e.get("/api/user/"+t)};function s(t){return e.post("/api/coaches",t).then(function(e){return e.data})}function l(t){return e.delete("/api/coaches/"+t)}var u=function(t){return e.post("/api/newsletter",t).then(function(e){return e.news})};var f=function(t){return e.post("/api/sendNews",t).then(function(e){return e.mail})};return{allCoaches:n,allCats:r,coachById:i,userById:c,createCoach:s,deleteCoach:l,addNewsLetter:u,sendFirstLetter:f,searchCategoryService:o,requestCoach:a}}})();(function(){angular.module("mtcApp").factory("userService",e);e.$inject=["$http","$log","$window"];function e(e,t,o){var n=function(){return o.localStorage["id_token"]};function r(t){return e.post("/api/users/create",t).then(function(e){return e.data})}function a(t){return e.put("/api/users/update",t).then(function(e){return e.data})}function i(t){return e.put("/api/coachEdit/update",t).then(function(e){return e.data})}return{getToken:n,registerUser:r,updateUser:a,updateCoach:i}}})();(function(){"use strict";angular.module("mtcApp").service("authService",e);e.$inject=["$timeout","$rootScope","lock","authManager","$http","$location","$state","$window"];function e(e,t,o,n,r,a,i,c){var s=JSON.parse(localStorage.getItem("profile"))||{};var l=JSON.parse(localStorage.getItem("subscription"))||{};function u(){return s}function f(e){s=e}function m(){return l}function d(e){l=e}function p(){o.show()}function g(){i.go("/");localStorage.removeItem("id_token");localStorage.removeItem("profile");localStorage.removeItem("subscription");localStorage.removeItem("role");n.unauthenticate();s={};c.location.reload()}function h(){var e=localStorage.getItem("profile");var o=angular.fromJson(e);var n=o.identities[0].user_id;a(n);function a(e){return r.get("/api/user/"+e).then(function(e){var o=e.data[0];if(o==undefined){localStorage.setItem("subscription",false);t.isSubscribed=false}else{localStorage.setItem("subscription",true);t.isSubscribed=true}},function(e){if(e){console.log(e)}})}}function v(){o.on("authenticated",function(r){localStorage.setItem("id_token",r.idToken);n.authenticate();o.getProfile(r.idToken,function(o,n){if(o){console.log(o)}else{localStorage.setItem("profile",JSON.stringify(n));f(n);h();e(function(){var e=localStorage.getItem("role");if(e==="student"){i.go("/")}else if(e==="teacher"){if(t.isSubscribed==false){i.go("subscription")}else if(t.isSubscribed==true){i.go("profile.bio")}}},1e3);t.$broadcast("userProfileSet",n);t.$broadcast("subscriptionSet",l)}})})}return{getUserProfile:u,userProfile:s,userSubscription:l,login:p,logout:g,registerAuthenticationListener:v}}})();(function(){angular.module("mtcApp").controller("homeCtrl",e);e.$inject=["$state","$translate","mtcData","$timeout","$uibModal","$rootScope"];if(window.location.pathname!=="/"){window.location.href="/#"+window.location.pathname}function e(e,t,o,n,r,a){var i=this;i.message={};i.isAuthenticated=a.isAuthenticated;i.onNewsLetter=function(){i.Error="";if(!i.formLetter.email){i.Error="Email required, please try again";return false}else{i.doAddNewsLetter(i.formLetter)}i.message.success=true;n(function(){i.message.success=false},3e3)};i.changeLanguage=function(e){t.use(e)};i.doAddNewsLetter=function(e){o.addNewsLetter({name:e.name,email:e.email})};i.popupEmailForm=function(){var e=r.open({templateUrl:"/home/email/emailModal.view.html",controller:"emailModalController",controllerAs:"vm"});e.result.then(function(e){console.log(e)})}}})();(function(){angular.module("mtcApp").controller("emailModalController",e);e.$inject=["$uibModalInstance","mtcData","$timeout"];function e(e,t,o){var n=this;n.onSubmit=function(){n.formError="";n.forSuccess="";if(!n.formLetter.role||!n.formLetter.email){n.formError="All fields required, please try again";return false}else{var e=n.formLetter;n.doRequest(e);n.sendFreeCoupon(e)}};n.sendFreeCoupon=function(e){t.sendFirstLetter({email:e.email}).then(function(e){console.log("Your coupon was deliverec to"+email)},function(e){console.log("Something went wrong: "+e)})};n.doRequest=function(e){t.addNewsLetter({role:e.role,email:e.email}).then(function(e){n.formSuccess="Thank you. We will send you a discount code via Email soon";o(function(){n.uibModal.close(e)},3e3)},function(e){n.formError="Your request has not been sent, possible from duplicate Email"})};n.uibModal={close:function(t){e.close(t)},cancel:function(){e.dismiss("cancel")}}}})();(function(){angular.module("mtcApp").controller("requestModalCtrl",e);e.$inject=["$uibModalInstance","mtcData","coachData","$timeout"];function e(e,t,o,n){var r=this;r.coachData=o;var a=new Date;var i=localStorage.getItem("profile");var c=angular.fromJson(i);var s=c.identities[0].user_id;r.success=false;r.isDisabled=false;r.onSubmit=function(){r.formError="";if(!r.formData.time||!r.formData.place||!r.formData.phone||!r.formData.email||!r.formData.sex){r.formError="All fields required, please try again";return false}else{var e=r.formData;alert("คุณได้ทำการขอแมทช์โค้ช "+o.name+"\nค่าธรรมเนียมการแมทช์ "+(o.price-10)*10/100+" บาท\n\n"+"You choosing to match Coach "+o.name+"\nThe matching fee is "+(o.price-10)*10/100+" Baht.");r.doRequest(e)}};r.doRequest=function(e){r.success=true;r.isDisabled=true;t.requestCoach({requestid:a.toISOString(),shortDescription:o.shortDescription,coachid:o.coachid,createdBy:o.createdBy,price:o.price,identity:s,name:e.name,level:e.level,goal:e.goal,time:e.time,place:e.place,phone:e.phone,email:e.email,sex:e.sex}).then(function(e){r.success=true;r.uibModal.close(e)},function(e){r.formError="Your request has not been sent, try again"})};r.uibModal={close:function(t){e.close(t)},cancel:function(){e.dismiss("cancel")}}}})();(function(){angular.module("mtcApp").component("ngInitial",function(){return{restrict:"A",controller:["$scope","$element","$attr","$parse",function(e,t,o,n){var r,a,i;i=o.ngInitial||o.value||t.text();r=n(o.ngModel);a=r.assign;a(e,i)}]}})})();(function(){angular.module("mtcApp").controller("profileController",e);e.$inject=["$stateParams","$state","$http","userService","mtcData"];if(window.location.pathname!=="/"){window.location.href="/#"+window.location.pathname}function e(e,t,o,n,r){var a;var i=function(){if(!localStorage.getItem("profile")){alert("Please Log in");t.go("home")}else{a=localStorage.getItem("profile");return a}};i();var c=angular.fromJson(a);var s=c.identities[0].user_id;var l=this;l.profile=c;var u=localStorage.getItem("subscription");l.subscription=u==="true";function f(){r.userById(s).then(function(e){if(e){l.data={coach:e};l.result=l.data.coach.data[0]}else{console.log("Something wrong")}},function(e){console.log(e)})}f()}})();(function(){angular.module("mtcApp").controller("profileCoursesController",e);e.$inject=["$state","$http","mtcData","$filter"];if(window.location.pathname!=="/"){window.location.href="/#"+window.location.pathname}function e(e,t,o,n){var r;var a;var i=function(){if(!localStorage.getItem("profile")){alert("Please Log in");e.go("home")}else{r=localStorage.getItem("profile");subscription=localStorage.getItem("subscription");return r}};i();var c=angular.fromJson(r);var s=c.identities[0].user_id;var l=this;l.subscription=subscription;var u=localStorage.getItem("subscription");l.subscription=u==="true";function f(e){return t.get("/api/users/course",{params:{id:e}}).then(function(e){return e.data})}function m(){return f(s).then(function(e,t){if(t){console.log(t)}else{l.data={coach:e}}})}m();l.deleteCourse=function(t,n){if(confirm("Are you sure to delete "+n+"?")==true){o.deleteCoach(t).then(function(t){console.log("Delete");e.go("profile.bio")},function(e){console.log("error: "+e)})}else{return false}};l.addCoach=function(){var t=localStorage.getItem("subscription");if(t=="false"){alert(n("translate")("PROFILE.ALERT"));e.go("subscription")}else if(t=="true"){e.go("addCoach")}}}})();(function(){angular.module("mtcApp").controller("profileBioController",e);e.$inject=["$stateParams","$http"];if(window.location.pathname!=="/"){window.location.href="/#"+window.location.pathname}function e(e,t){var o=this;var n=localStorage.getItem("profile");var r=angular.fromJson(n);var a=r.identities[0].user_id;o.profile=r;function i(e){return t.get("/api/users/bio",{params:{id:e}}).then(function(e){return e.data})}function c(){return i(a).then(function(e,t){if(t){console.log(t)}else{o.data={coach:e}}})}c()}})();(function(){angular.module("mtcApp").controller("profileEditController",e);e.$inject=["$scope","userService","$state","$timeout","awsPolicy","$http"];function e(e,t,o,n,r,a){var i=r.getSign();var c=localStorage.getItem("profile");var s=angular.fromJson(c);var l=s.identities[0].user_id;var u=s.identities[0].user_id;e.message={};e.onSubmit=function(){e.formError="";if(!e.user.result.name||!e.user.result.surname||!e.user.result.email||!e.user.result.idnumber||!e.user.result.telephone){e.formError="All fields required, please try again";return false}else{var t=e.user.result;e.doEdit(t)}};var f=new Date;e.doEdit=function(r){t.updateUser({memberSince:f,identity:l,name:r.name,surname:r.surname,email:r.email,picture:s.picture,address:r.address,experience:r.experience,telephone:r.telephone,lineid:r.lineid,idnumber:r.idnumber,education:r.education,term:r.term}).then(function(t){e.message.success=true;n(function(){e.message.success=false},2e3);localStorage.setItem("subscription",true);n(function(){o.go("profile.bio")},2e3)},function(t){var o=Object.keys(t).map(function(e){return t[e]});e.formError="Your edit has not been saved, try again. Possible from duplicate data."});return false};e.resetForm=function(){e.subscription.$setPristine()}}})();(function(){angular.module("mtcApp").controller("coachEditCtrl",e);e.$inject=["$stateParams","$http","mtcData","userService","$log","$scope","$state","$timeout","Upload","awsPolicy","spinnerService"];if(window.location.pathname!=="/"){window.location.href="/#"+window.location.pathname}function e(e,t,o,n,r,a,i,c,s,l,u){var f=this;f.coachid=e.coachid;var m=l.getSign();var d=localStorage.getItem("profile");var p=angular.fromJson(d);var g=p.identities[0].user_id;var h;f.message={};f.isDisabled=false;f.onSubmit=function(){f.formError="";if(!f.formData.name||!f.formData.subject||!f.formData.price||!f.formData.shortDescription||!f.formData.courseDescription||!f.formData.time||!f.formData.province||!f.formData.location||!f.formData.category||!f.formData.courseLength){f.formError="All fields required, please try again";return false}else{var e=f.formData;f.doEdit(e);f.isDisabled=true;f.message.success=true;c(function(){f.message.success=false},1e3).then(function(e){if(e){console.log(error);f.formError="Your edit has not been saved, try again"}else{console.log("YES!")}});i.go("profile.courses")}};v();function v(){return b().then(function(){r.info("View coach by ID")})}function b(){return o.coachById(f.coachid).success(function(e){if(e){f.formData=e;f.imageUrl=e.imageUrl;h=e.imageUrl;oldCategory=e.category}else{console.log("Error: no coachid found")}console.log("coachid found")}).error(function(e){console.log(e)})}f.doEdit=function(e){n.updateCoach({createdDate:S,coachid:f.coachid,name:e.name,price:e.price,subject:e.subject,shortDescription:e.shortDescription,courseDescription:e.courseDescription,preparation:e.preparation,group:e.group,time:e.time,courseLength:e.courseLength,level:e.level,location:e.location,province:e.province,category:e.category,imageUrl:h,videoid:e.videoid,oldCategory:oldCategory});return false};f.resetForm=function(){a.subscription.$setPristine()};var w=new Date;var S=w.toISOString();a.beforeResizingImages=function(e){u.show("picturespinner")};a.afterResizingImages=function(e){u.hide("picturespinner")};a.uploadPic=function(e){alert("เมื่อ upload หรือเปลี่ยนรูปใหม่เสร็จ ต้องทำการ submit แบบฟอร์มทั้งหมดที่ปุ่ม Submit ด้านล่างสุดบรรทัดสุดท้ายด้วยทุกครั้ง\nEverytime you finish upload or change the new picture. Please submit the whole form via the button beneath last line");Promise.resolve(m).then(function(e){return e}).then(function(t){s.upload({url:"https://matchthecoach.s3.amazonaws.com",method:"POST",data:{key:"coaches/"+S,AWSAccessKeyId:t.s3AccessKeyId,acl:"public-read",policy:t.s3Policy,signature:t.s3Signature,"Content-Type":e.type!=""?e.type:"application/octet-stream",filename:e.name,file:e}}).then(function(e){c(function(){a.result=e.data})},function(e){if(e.status>0)a.errorMsg=e.status+":"+e.data},function(e){a.progress=Math.min(100,parseInt(100*e.loaded/e.total));h="https://s3-ap-southeast-1.amazonaws.com/matchthecoach/coaches/"+S})})};function y(){return o.allCats().success(function(e){f.data={cat:e}}).error(function(e){f.message="Sorry, something's gone wrong"})}y()}})();(function(){angular.module("mtcApp").controller("subscriptionCtrl",e);e.$inject=["userService","$state","$timeout","$window","Upload","$scope","awsPolicy","mtcData"];function e(e,t,o,n,r,a,i,c){var s=this;var l=i.getSign();var u=localStorage.getItem("profile");var f=angular.fromJson(u);var m=f.identities[0].user_id;var d=localStorage.getItem("role");s.message={};s.isDisabled=false;s.onSubmit=function(){s.formError="";if(!s.formData.name||!s.formData.surname||!s.formData.email||!s.formData.idnumber||!s.formData.telephone){s.formError="All fields required, please try again";return false}else{var e=s.formData;s.doSubscription(e)}};var p=new Date;s.doSubscription=function(r){e.registerUser({memberSince:p,identity:m,name:r.name,surname:r.surname,email:r.email,picture:f.picture,address:r.address,experience:r.experience,telephone:r.telephone,lineid:r.lineid,idnumber:r.idnumber,education:r.education,terms:r.terms,role:r.role}).then(function(e){s.doAddNewsLetter(r);s.isDisabled=true;s.message.success=true;o(function(){s.message.success=false},2e3);localStorage.setItem("subscription",true);if(d==="teacher"){o(function(){t.go("addCoach")},2e3)}else{o(function(){t.go("/")},2e3);o(function(){n.location.reload()},2500)}},function(e){var t=Object.keys(e).map(function(t){return e[t]});s.formError="Your edit has not been saved, try again. Check your mobile and Email field. Mobile number should contain ONLY number, without -"});return false};s.resetForm=function(){s.subscription.$setPristine()};s.doAddNewsLetter=function(e){c.addNewsLetter({name:e.name,email:e.email,role:e.role})}}})();(function(){angular.module("mtcApp").controller("searchCtrl",e);e.$inject=["$stateParams","$http","mtcData","$log","$uibModal"];if(window.location.pathname!=="/"){window.location.href="/#"+window.location.pathname}function e(e,t,o,n,r){var a=this;a.text=e.text;i();function i(){return s().then(function(){n.info("Search coaches by keyword.")})}var c=function(e){var t=e.length,o,n;while(t){n=Math.floor(Math.random()*t--);o=e[t];e[t]=e[n];e[n]=o}return e};function s(){return o.searchCategoryService(a.text).success(function(e){a.data={coach:e};c(a.data.coach)}).error(function(e){a.message="Sorry, something's gone wrong"})}a.popupHelp=function(){var e=r.open({templateUrl:"/home/helpModal.view.html"});e.result.then(function(e){console.log("Help")})}}})();(function(){angular.module("mtcApp").controller("coachDetailCtrl",e);e.$inject=["$stateParams","$http","mtcData","$log","$scope","$uibModal","$rootScope","$state"];if(window.location.pathname!=="/"){window.location.href="/#"+window.location.pathname}function e(e,t,o,n,r,a,i,c){var s=this;s.coachid=e.coachid;r.playerVars={autoplay:0};r.vdo=null;u();function l(){var e=document.querySelector(".js-textareacopybtn");e.addEventListener("click",function(e){var t=document.querySelector(".js-copytextarea");t.select();try{var o=document.execCommand("copy");var n=o?"successful":"unsuccessful";console.log("Copying text command was "+n)}catch(e){console.log("Oops, unable to copy")}})}l();function u(){return f().then(function(){n.info("View coach by ID")})}function f(){return o.coachById(s.coachid).success(function(e){if(e){s.data={coach:e};r.videoid=e.videoid;r.vdo=true}else{r.vdo=false}}).error(function(e){console.log(e)})}s.popupRequestForm=function(){var e=a.open({templateUrl:"/common/request/requestModal.view.html",controller:"requestModalCtrl",controllerAs:"vm",resolve:{coachData:function(){return{coachid:s.coachid,shortDescription:s.data.coach.shortDescription,createdBy:s.data.coach.createdBy,price:s.data.coach.price,length:s.data.coach.length,name:s.data.coach.name}}}});e.result.then(function(e){console.log(e)})}}})();(function(){angular.module("mtcApp").controller("userDetailController",e);e.$inject=["$stateParams","$http","mtcData"];if(window.location.pathname!=="/"){window.location.href="/#"+window.location.pathname}function e(e,t,o){var n=this;var r=e.userid;n.teacher="";function a(){o.userById(r).then(function(e){if(e){n.data={coach:e};n.teacher=n.data.coach.data[0]}else{console.log("Something wrong")}},function(e){console.log(e)})}a()}})();(function(){angular.module("mtcApp").controller("addCoachCtrl",e);e.$inject=["mtcData","$scope","$state","$timeout","$window","Upload","awsPolicy","spinnerService"];function e(e,t,o,n,r,a,i,c){var s=this;var l=i.getSign();var u=localStorage.getItem("profile");var f=angular.fromJson(u);var m=f.identities[0].user_id;s.formData="";s.formData.sale=0;t.$watch("vm.formData.sale",function(){s.presale=s.formData.price*(100/(100-s.formData.sale))});s.message={};s.isDisabled=false;n(function(){alert("Please noted that it is prohibited to give out your contact (Telephone number ,LINE ID, email, or facebook contact, etc.) Your account will be banned if you break the rules.\n\nทางเราไม่อนุญาตให้ครูทุกท่านโพสเบอร์ติดต่อ LINE ID, facebook, Email หรือการติดต่อทุกชนิดในช่องที่ไม่ได้สำหรับให้กรอกสิ่งเหล่านี้ ถ้าฝ่าฝืนจะถูกแบนแอคเคานท์ทันที ขออภัยในความไม่สะดวก")},2e3);s.onSubmit=function(){s.formError="";if(!s.formData.name||!s.formData.subject||!s.formData.price||!s.formData.shortDescription||!s.formData.courseDescription||!s.formData.time||!s.formData.province||!s.formData.location||!s.formData.category||!s.formData.courseLength){s.formError="All fields required, please try again";return false}else{var e=s.formData;s.doAddCoach(e)}};var d=new Date;var p=d.toISOString();s.doAddCoach=function(t){e.createCoach({createdDate:p,name:t.name,price:t.price,sale:t.sale,subject:t.subject,shortDescription:t.shortDescription,courseDescription:t.courseDescription,preparation:t.preparation,group:t.group,time:t.time,courseLength:t.courseLength,level:t.level,location:t.location,province:t.province,category:t.category,videoid:t.videoid,createdBy:m}).then(function(e){s.isDisabled=true;s.message.success=true;n(function(){s.message.success=false},2e3);n(function(){o.go("/")},2e3);n(function(){r.location.reload()},2500)},function(e){var t=Object.keys(e).map(function(t){return e[t]});s.formError="Your course has not been added, try again. Possible from duplicate data."});return false};s.resetForm=function(){s.addCoach.$setPristine()};t.beforeResizingImages=function(e){c.show("picturespinner")};t.afterResizingImages=function(e){c.hide("picturespinner")};t.uploadPic=function(e){alert("เมื่อ upload หรือเปลี่ยนรูปใหม่เสร็จ ต้องทำการ submit แบบฟอร์มทั้งหมดที่ปุ่ม Submit ด้านล่างสุดบรรทัดสุดท้ายด้วยทุกครั้ง\nEverytime you finish upload or change the new picture. Please submit the whole form via the button beneath last line");Promise.resolve(l).then(function(e){return e}).then(function(o){a.upload({url:"https://matchthecoach.s3.amazonaws.com",method:"POST",data:{key:"coaches/"+p,AWSAccessKeyId:o.s3AccessKeyId,acl:"public-read",policy:o.s3Policy,signature:o.s3Signature,"Content-Type":e.type!=""?e.type:"application/octet-stream",filename:e.name,file:e}}).then(function(e){n(function(){t.result=e.data})},function(e){if(e.status>0)t.errorMsg=e.status+":"+e.data},function(e){t.progress=Math.min(100,parseInt(100*e.loaded/e.total))})})};function g(){return e.allCats().success(function(e){s.data={cat:e}}).error(function(e){s.message="Sorry, something's gone wrong"})}g()}})();(function(){angular.module("mtcApp").component("navigation",{restrict:"EA",templateUrl:"common/navigationAndfooter/navigation.template.html",controller:"loginController",controllerAs:"lgin"})})();(function(){angular.module("mtcApp").component("footerGeneric",{templateUrl:"/common/navigationAndfooter/footerGeneric.template.html"})})();(function(){angular.module("mtcApp").component("landing",{restrict:"EA",templateUrl:"/home/landing.template.html",controller:"loginController",controllerAs:"lgin"})})();(function(){angular.module("mtcApp").controller("SearchBoxController",e);e.$inject=["$state","mtcData","$timeout","$http"];if(window.location.pathname!=="/"){window.location.href="/#"+window.location.pathname}function e(e,t,o,n){var r=this;r.text="";r.onSelect=function(e,t,o){r.$item=e;r.$model=t;r.$label=o};r.onSubmit=function(t){if(r.text!==""){e.go("search",{text:r.text})}};r.searching=function(e){return n.get("api/coaches/searchCat",{params:{text:e}}).then(function(e){return e.data})};a();function a(){return t.allCats().success(function(e){r.data={cat:e}}).error(function(e){r.message="Sorry, something's gone wrong"})}r.addModel=function(t){r.text=t;e.go("search",{text:r.text})}}})();(function(){angular.module("mtcApp").component("searchbox",{restrict:"E",templateUrl:"/common/searchbox/searchbox.template.html",bindings:{text:"<"},controller:"SearchBoxController",controllerAs:"vm"})})();(function(){angular.module("mtcApp").factory("awsPolicy",e);e.$inject=["$http","$log"];function e(e,t){var o=function(){return e.get("/api/awsPolicy").then(function(e){return e.data})};return{getSign:o}}})();(function(){angular.module("mtcApp").controller("loginController",e);e.$inject=["authService","$translate","$rootScope","$scope","$state","$timeout","$uibModal"];function e(e,t,o,n,r,a,i){var c=this;c.authService=e;c.changeLanguage=function(e){t.use(e)};c.getSubscription=o.isSubscribed;c.serviceSubscription=o.authService.userSubscription;c.isAuthenticated=o.isAuthenticated;c.localStorageSubscription=localStorage.getItem("subscription");a(function(){c.getSubscription=o.isSubscribed},1e3);o.$on("userProfileSet",function(e,t){c.isAuthenticated=o.isAuthenticated;c.profile=t});o.$on("subscriptionSet",function(e,t){a(function(){c.getSubscription=o.isSubscribed},1e3)});var s=localStorage.getItem("profile");if(s){c.profile=angular.fromJson(s)}var l=new Auth0Lock("2m8hbwYC8UdyjITdKGDptrRvF6BXweY7","royyak.auth0.com");l.on("authenticated",function(e){l.getProfile(e.idToken,function(t,o){if(t){console.log(t);return}if(o){localStorage.setItem("id_token",e.idToken);localStorage.setItem("profile",JSON.stringify(profile))}return})});c.addCoach=function(){var e=localStorage.getItem("subscription");if(e=="false"){alert($filter("translate")("PROFILE.ALERT"));r.go("subscription")}else if(e=="true"){r.go("addCoach")}};c.student=function(){localStorage.setItem("role","student");e.login()};c.teacher=function(){localStorage.setItem("role","teacher");r.go("become")};c.becomeCoach=function(){if(o.isAuthenticated===false){e.login()}else if(o.isAuthenticated===true){r.go("profile.bio")}};c.popupHelp=function(){var e=i.open({templateUrl:"/home/helpModal.view.html"});e.result.then(function(e){console.log("Help")})}}})();(function(){angular.module("mtcApp").controller("twitCtrl",e);e.$inject=["mtcData","$http"];function e(e,t){var o=this;o.groupReply=[];o.add="";o.replyTo="";o.name="";o.addGroupReply=function(e,t){var n={name:e,id:t};o.groupReply.push(n);o.replyTo=o.groupReply.toString();o.name=o.groupReply[o.groupReply.length-1].name;o.id=o.groupReply[o.groupReply.length-1].id};o.onSubmit=function(){o.formError="";if(!o.formData.tweet){o.formError="All fields required, please try again";return false}else{var e=o.formData;o.callTweet(e)}};o.getTwitter=function(e,n){return t({url:"/api/twit",method:"GET",params:{text:e,date:n}}).then(function(e){if(e){o.data={twit:e}}else{console.log("Something wrong")}},function(e){console.log(e)})};o.callTweet=function(e){var t=o.formData;var r=o.id.toString();n({tweet:e.tweet,name:o.name,id:r}).then(function(e){console.log("Tweeting!")},function(e){console.log(e)})};var n=function(e){return t.post("/api/tweet",e)}}})();