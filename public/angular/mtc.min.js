(function(){angular.module("mtcApp").factory("mtcData",e);e.$inject=["$http","$log","Restangular"];function e(e,t,o){var n=function(e){return o.one("coaches/search/?text="+e).getList()};var a=function(){return e.get("/api/allcoaches")};var r=function(){return o.all("allCats").getList()};var i=function(t){return e.post("/api/request",t)};var c=function(e){return o.one("coaches").customGET(e)};var l=function(e){return o.one("user").customGET(e)};function s(t){return e.post("/api/coaches",t).then(function(e){return e.data}).catch(function(e){console.log(e)})}function u(t){return e.delete("/api/coaches/"+t)}var f=function(t){return e.post("/api/newsletter",t).then(function(e){return e.news}).catch(function(e){console.log(e)})};var m=function(t){return e.post("/api/sendNews",t).then(function(e){return e.mail}).catch(function(e){console.log(e)})};return{allCoaches:a,allCats:r,coachById:c,userById:l,createCoach:s,deleteCoach:u,addNewsLetter:f,sendFirstLetter:m,searchCategoryService:n,requestCoach:i}}})();(function(){angular.module("mtcApp").factory("userService",e);e.$inject=["$http","$log","$window"];function e(e,t,o){var n=function(){return o.localStorage["id_token"]};function a(t){return e.post("/api/users/create",t).then(function(e){return e.data}).catch(function(e){console.log(e)})}function r(t){return e.put("/api/users/update",t).then(function(e){return e.data}).catch(function(e){console.log(e)})}function i(t){return e.put("/api/coachEdit/update",t).then(function(e){return e.data}).catch(function(e){console.log(e)})}return{getToken:n,registerUser:a,updateUser:r,updateCoach:i}}})();(function(){"use strict";angular.module("mtcApp").service("authService",e);e.$inject=["$timeout","$rootScope","lock","authManager","$http","$location","$state","$window"];function e(e,t,o,n,a,r,i,c){var l=JSON.parse(localStorage.getItem("profile"))||{};var s=JSON.parse(localStorage.getItem("subscription"))||{};function u(){return l}function f(e){l=e}function m(){return s}function d(e){s=e}function p(){o.show()}function h(){i.go("/");localStorage.removeItem("id_token");localStorage.removeItem("profile");localStorage.removeItem("subscription");localStorage.removeItem("role");n.unauthenticate();l={};c.location.reload()}function g(){var e=localStorage.getItem("profile");var o=angular.fromJson(e);var n=o.identities[0].user_id;r(n);function r(e){return a.get("/api/user/"+e).then(function(e){var o=e.data[0];if(o==undefined){localStorage.setItem("subscription",false);t.isSubscribed=false}else{localStorage.setItem("subscription",true);t.isSubscribed=true}},function(e){if(e){console.log(e)}})}}function v(){o.on("authenticated",function(a){localStorage.setItem("id_token",a.idToken);n.authenticate();o.getProfile(a.idToken,function(o,n){if(o){console.log(o)}else{localStorage.setItem("profile",JSON.stringify(n));f(n);g();e(function(){var e=localStorage.getItem("role");if(e==="student"){i.go("/")}else if(e==="teacher"){if(t.isSubscribed==false){i.go("subscription")}else if(t.isSubscribed==true){i.go("profile.bio")}}},1e3);t.$broadcast("userProfileSet",n);t.$broadcast("subscriptionSet",s)}})})}return{getUserProfile:u,userProfile:l,userSubscription:s,login:p,logout:h,registerAuthenticationListener:v}}})();(function(){angular.module("mtcApp").controller("homeCtrl",e);e.$inject=["metadataService","$state","$translate","mtcData","$timeout","$uibModal","$rootScope"];if(window.location.pathname!=="/"){window.location.href="/#"+window.location.pathname}function e(e,t,o,n,a,r,i){this.$onInit=function(){var e=this;e.message={};e.isAuthenticated=i.isAuthenticated;e.onNewsLetter=function(){e.Error="";if(!e.formLetter.email){e.Error="Email required, please try again";return false}else{e.doAddNewsLetter(e.formLetter)}e.message.success=true;a(function(){e.message.success=false},3e3)};e.changeLanguage=function(e){o.use(e)};e.doAddNewsLetter=function(e){n.addNewsLetter({name:e.name,email:e.email})};e.popupEmailForm=function(){var e=r.open({templateUrl:"/home/email/emailModal.view.html",controller:"emailModalController",controllerAs:"vm"});e.result.then(function(e){console.log(e)}).catch(function(e){console.log(e)})}}}})();(function(){angular.module("mtcApp").controller("emailModalController",e);e.$inject=["$uibModalInstance","mtcData","$timeout"];function e(e,t,o){this.$onInit=function(){var n=this;n.onSubmit=function(){n.formError="";n.forSuccess="";if(!n.formLetter.role||!n.formLetter.email){n.formError="All fields required, please try again";return false}else{var e=n.formLetter;n.doRequest(e);n.sendFreeCoupon(e)}};n.sendFreeCoupon=function(e){t.sendFirstLetter({email:e.email}).then(function(e){console.log("Your coupon was deliverec to"+email)}).catch(function(e){console.log("Something went wrong: "+e)})};n.doRequest=function(e){t.addNewsLetter({role:e.role,email:e.email}).then(function(e){n.formSuccess="Thank you. We will send you a discount code via Email soon";o(function(){n.uibModal.close(e)},3e3)}).catch(function(e){n.formError="Your request has not been sent, possible from duplicate Email"})};n.uibModal={close:function(t){e.close(t)},cancel:function(){e.dismiss("cancel")}}}}})();(function(){angular.module("mtcApp").controller("requestModalCtrl",e);e.$inject=["$uibModalInstance","mtcData","coachData","$timeout"];function e(e,t,o,n){this.$onInit=function(){var n=this;n.coachData=o;var a=new Date;var r=localStorage.getItem("profile");var i=angular.fromJson(r);var c;var l=function(){if(i){c=i.identities[0].user_id}else{c=null}};l();n.success=false;n.isDisabled=false;var s=parseInt(o.price/o.length*2);var u=s;n.onSubmit=function(){n.formError="";if(!n.formData.time||!n.formData.place||!n.formData.phone||!n.formData.email||!n.formData.sex){n.formError="All fields required, please try again";return false}else{var e=n.formData;alert("คุณได้ทำการขอแมทช์โค้ช "+o.name+"\nค่าธรรมเนียมการแมทช์ "+s+" บาท\n\n"+"You choosing to match Coach "+o.name+"\nThe matching fee is "+s+" Baht.");n.doRequest(e)}};n.doRequest=function(e){n.success=true;n.isDisabled=true;t.requestCoach({requestid:a.toISOString(),shortDescription:o.shortDescription,coachid:o.coachid,createdBy:o.createdBy,price:o.price,coachMatchingFee:u,studentMatchingFee:s,identity:c,name:e.name,level:e.level,goal:e.goal,time:e.time,place:e.place,phone:e.phone,email:e.email,sex:e.sex}).then(function(e){n.success=true;n.uibModal.close(e)}).catch(function(e){n.formError="Your request has not been sent, try again"})};n.uibModal={close:function(t){e.close(t)},cancel:function(){e.dismiss("cancel")}}}}})();(function(){angular.module("mtcApp").component("ngInitial",{restrict:"A",controller:["$scope","$element","$attr","$parse",function(e,t,o,n){var a,r,i;i=o.ngInitial||o.value||t.text();a=n(o.ngModel);r=a.assign;r(e,i)}]})})();(function(){angular.module("mtcApp").controller("profileController",e);e.$inject=["$stateParams","$state","$http","userService","mtcData"];if(window.location.pathname!=="/"){window.location.href="/#"+window.location.pathname}function e(e,t,o,n,a){this.$onInit=function(){var e;var o=function(){if(!localStorage.getItem("profile")){alert("Please Log in");t.go("home")}else{e=localStorage.getItem("profile");return e}};o();var n=angular.fromJson(e);var r=n.identities[0].user_id;var i=this;i.profile=n;var c=localStorage.getItem("subscription");i.subscription=c==="true";function l(){a.userById(r).then(function(e){if(!e){console.log("no userID found");t.go("subscription");return}else{i.data={coach:e};i.result=i.data.coach[0]}}).catch(function(e){console.log(e)})}l()}}})();(function(){angular.module("mtcApp").controller("profileCoursesController",e);e.$inject=["$state","$http","mtcData","$filter"];if(window.location.pathname!=="/"){window.location.href="/#"+window.location.pathname}function e(e,t,o,n){this.$onInit=function(){var a;var r;var i=function(){if(!localStorage.getItem("profile")){alert("Please Log in");e.go("home")}else{a=localStorage.getItem("profile");subscription=localStorage.getItem("subscription");return a}};i();var c=angular.fromJson(a);var l=c.identities[0].user_id;var s=this;s.subscription=subscription;var u=localStorage.getItem("subscription");s.subscription=u==="true";function f(e){return t.get("/api/users/course",{params:{id:e}}).then(function(e){return e.data}).catch(function(e){console.log(e)})}function m(){return f(l).then(function(e){s.data={coach:e}}).catch(function(e){console.log(e)})}m();s.deleteCourse=function(t,n){if(confirm("Are you sure to delete "+n+"?")==true){o.deleteCoach(t).then(function(t){console.log("Delete");e.go("profile.bio")}).catch(function(e){console.log("error: "+e)})}else{return false}};s.addCoach=function(){var t=localStorage.getItem("subscription");if(t=="false"){alert(n("translate")("PROFILE.ALERT"));e.go("subscription")}else if(t=="true"){e.go("addCoach")}}}}})();(function(){angular.module("mtcApp").controller("profileBioController",e);e.$inject=["$stateParams","$http"];if(window.location.pathname!=="/"){window.location.href="/#"+window.location.pathname}function e(e,t){this.$onInit=function(){var e=this;var o=localStorage.getItem("profile");var n=angular.fromJson(o);var a=n.identities[0].user_id;e.profile=n;function r(e){return t.get("/api/users/bio",{params:{id:e}}).then(function(e){return e.data}).catch(function(e){console.log(e)})}function i(){return r(a).then(function(t){e.data={coach:t}}).catch(function(e){console.log(e)})}i()}}})();(function(){angular.module("mtcApp").controller("profileEditController",e);e.$inject=["$scope","userService","$state","$timeout","awsPolicy","$http"];function e(e,t,o,n,a,r){this.$onInit=function(){var r=a.getSign();var i=localStorage.getItem("profile");var c=angular.fromJson(i);var l=c.identities[0].user_id;var s=c.identities[0].user_id;e.message={};e.onSubmit=function(){e.formError="";if(!e.user.result.name||!e.user.result.surname||!e.user.result.email||!e.user.result.idnumber||!e.user.result.telephone){e.formError="All fields required, please try again";return false}else{var t=e.user.result;e.doEdit(t)}};var u=new Date;e.doEdit=function(a){t.updateUser({memberSince:u,identity:l,name:a.name,surname:a.surname,email:a.email,picture:c.picture,address:a.address,experience:a.experience,telephone:a.telephone,lineid:a.lineid,idnumber:a.idnumber,education:a.education,term:a.term}).then(function(t){e.message.success=true;n(function(){e.message.success=false},2e3);localStorage.setItem("subscription",true);n(function(){o.go("profile.bio")},2e3)}).catch(function(t){var o=Object.keys(t).map(function(e){return t[e]});e.formError="Your edit has not been saved, try again. Possible from duplicate data."});return false};e.resetForm=function(){e.subscription.$setPristine()}}}})();(function(){angular.module("mtcApp").controller("coachEditCtrl",e);e.$inject=["$stateParams","$http","mtcData","userService","$log","$scope","$state","$timeout","Upload","awsPolicy","spinnerService"];if(window.location.pathname!=="/"){window.location.href="/#"+window.location.pathname}function e(e,t,o,n,a,r,i,c,l,s,u){this.$onInit=function(){var t=this;t.coachid=e.coachid;var f=s.getSign();var m=localStorage.getItem("profile");var d=angular.fromJson(m);var p=d.identities[0].user_id;var h;t.message={};t.isDisabled=false;t.onSubmit=function(){t.formError="";if(!t.formData.name||!t.formData.subject||!t.formData.price||!t.formData.shortDescription||!t.formData.courseDescription||!t.formData.time||!t.formData.province||!t.formData.location||!t.formData.category||!t.formData.courseLength){t.formError="All fields required, please try again";return false}else{var e=t.formData;t.doEdit(e);t.isDisabled=true;t.message.success=true;c(function(){t.message.success=false},1e3).then(function(){console.log("Data edited")}).catch(function(e){console.log(e);t.formError="Your edit has not been saved, try again"});i.go("profile.courses")}};g();function g(){v();a.info("View coach by ID")}function v(){return o.coachById(t.coachid).then(function(e){if(e){var o=e;t.formData=o;t.imageUrl=o.imageUrl;h=o.imageUrl;oldCategory=o.category}else{console.log("Error: no coachid found")}console.log("coachid found")}).catch(function(e){console.log(e)})}t.doEdit=function(e){n.updateCoach({createdDate:S,coachid:t.coachid,name:e.name,price:e.price,subject:e.subject,shortDescription:e.shortDescription,courseDescription:e.courseDescription,preparation:e.preparation,group:e.group,time:e.time,courseLength:e.courseLength,level:e.level,location:e.location,province:e.province,category:e.category,imageUrl:h,videoid:e.videoid,oldCategory:oldCategory});return false};t.resetForm=function(){i.go("profile.courses")};var b=new Date;var S=b.toISOString();r.beforeResizingImages=function(e){u.show("picturespinner")};r.afterResizingImages=function(e){u.hide("picturespinner")};r.uploadPic=function(e){alert("เมื่อ upload หรือเปลี่ยนรูปใหม่เสร็จ ต้องทำการ submit แบบฟอร์มทั้งหมดที่ปุ่ม Submit ด้านล่างสุดบรรทัดสุดท้ายด้วยทุกครั้ง\nEverytime you finish upload or change the new picture. Please submit the whole form via the button beneath last line");Promise.resolve(f).then(function(e){return e}).then(function(t){l.upload({url:"https://matchthecoach.s3.amazonaws.com",method:"POST",data:{key:"coaches/"+S,AWSAccessKeyId:t.s3AccessKeyId,acl:"public-read",policy:t.s3Policy,signature:t.s3Signature,"Content-Type":e.type!=""?e.type:"application/octet-stream",filename:e.name,file:e}}).then(function(e){c(function(){r.result=e.data})},function(e){if(e.status>0)r.errorMsg=e.status+":"+e.data},function(e){r.progress=Math.min(100,parseInt(100*e.loaded/e.total));h="https://s3-ap-southeast-1.amazonaws.com/matchthecoach/coaches/"+S}).catch(function(e){console.log(e)})})}}}})();(function(){angular.module("mtcApp").controller("subscriptionCtrl",e);e.$inject=["userService","$state","$timeout","$window","Upload","$scope","awsPolicy","mtcData"];function e(e,t,o,n,a,r,i,c){this.$onInit=function(){var a=this;var r=i.getSign();var l=localStorage.getItem("profile");var s=angular.fromJson(l);var u=s.identities[0].user_id;var f=localStorage.getItem("role");a.message={};a.isDisabled=false;a.onSubmit=function(){a.formError="";if(!a.formData.name||!a.formData.surname||!a.formData.email||!a.formData.idnumber||!a.formData.telephone){a.formError="All fields required, please try again";return false}else{var e=a.formData;a.doSubscription(e)}};var m=new Date;a.doSubscription=function(r){e.registerUser({memberSince:m,identity:u,name:r.name,surname:r.surname,email:r.email,picture:s.picture,address:r.address,experience:r.experience,telephone:r.telephone,lineid:r.lineid,idnumber:r.idnumber,education:r.education,terms:r.terms,role:r.role}).then(function(e){a.doAddNewsLetter(r);a.isDisabled=true;a.message.success=true;o(function(){a.message.success=false},2e3);localStorage.setItem("subscription",true);if(f==="teacher"){o(function(){t.go("addCoach")},2e3)}else{o(function(){t.go("/")},2e3);o(function(){n.location.reload()},2500)}}).catch(function(e){var t=Object.keys(e).map(function(t){return e[t]});a.formError="Your edit has not been saved, try again. Check your mobile and Email field. Mobile number should contain ONLY number, without -"});return false};a.resetForm=function(){a.subscription.$setPristine()};a.doAddNewsLetter=function(e){c.addNewsLetter({name:e.name,email:e.email,role:e.role})}}}})();(function(){angular.module("mtcApp").controller("searchCtrl",e);e.$inject=["metadataService","$stateParams","mtcData","$log","$uibModal"];if(window.location.pathname!=="/"){window.location.href="/#"+window.location.pathname}function e(e,t,o,n,a){this.$onInit=function(){var r=this;r.text=t.text;i();e.loadMetadata({title:"รายชื่อครูผู้เชี่ยวชาญ "+r.text,description:"หาครูผู้เชี่ยวชาญในวิชา "+r.text+" ที่มีประสบการณ์มากมาย"});function i(){return l().then(function(){n.info("Search coaches by keyword.")}).catch(function(e){console.log(e)})}var c=function(e){var t=e.length,o,n;while(t){n=Math.floor(Math.random()*t--);o=e[t];e[t]=e[n];e[n]=o}return e};function l(){return o.searchCategoryService(r.text).then(function(e){r.data={coach:e};c(r.data.coach)}).catch(function(e){r.message="Sorry, something's gone wrong"})}r.popupHelp=function(){var e=a.open({templateUrl:"/home/helpModal.view.html"});e.result.then(function(e){console.log("Help")}).catch(function(e){console.log(e)})}}}})();(function(){angular.module("mtcApp").controller("coachDetailCtrl",e);e.$inject=["$stateParams","metadataService","mtcData","$log","$scope","$uibModal","$rootScope","$state"];if(window.location.pathname!=="/"){window.location.href="/#"+window.location.pathname}function e(e,t,o,n,a,r,i,c){this.$onInit=function(){var a=this;a.coachid=e.coachid;t.loadMetadata({title:"รายละเอียดโค้ช "+a.coachid,description:"ดูรายละเอียดตามรายวิชา"});a.playerVars={autoplay:0};a.vdo=null;c();function i(){var e=document.querySelector(".js-textareacopybtn");e.addEventListener("click",function(e){var t=document.querySelector(".js-copytextarea");t.select();try{var o=document.execCommand("copy");var n=o?"successful":"unsuccessful";console.log("Copying text command was "+n)}catch(e){console.log("Oops, unable to copy")}})}i();function c(){l();n.info("View coach by ID")}function l(){o.coachById(a.coachid).then(function(e){if(e){a.data={coach:e};a.videoid=e.videoid;a.vdo=true}else{a.vdo=false}}).catch(function(e){console.log(e)})}a.popupRequestForm=function(){var e=r.open({templateUrl:"/common/request/requestModal.view.html",controller:"requestModalCtrl",controllerAs:"vm",resolve:{coachData:function(){return{coachid:a.coachid,shortDescription:a.data.coach.shortDescription,createdBy:a.data.coach.createdBy,price:a.data.coach.price,length:a.data.coach.courseLength,name:a.data.coach.name,rating:a.data.coach.rating}}}});e.result.then(function(e){console.log(e)})}}}})();(function(){angular.module("mtcApp").controller("userDetailController",e);e.$inject=["$stateParams","mtcData","$log"];if(window.location.pathname!=="/"){window.location.href="/#"+window.location.pathname}function e(e,t,o){this.$onInit=function(){var n=this;n.userid=e.userid;n.teacher="";function a(){t.userById(n.userid).then(function(e){n.data={coach:e};n.teacher=n.data.coach[0]}).catch(function(e){console.log(e)})}function r(){a();o.info("View user by ID")}r()}}})();(function(){angular.module("mtcApp").controller("addCoachCtrl",e);e.$inject=["mtcData","$scope","$state","$timeout","$window","Upload","awsPolicy","spinnerService"];function e(e,t,o,n,a,r,i,c){this.$onInit=function(){var l=this;var s=i.getSign();var u=localStorage.getItem("profile");var f=angular.fromJson(u);var m=f.identities[0].user_id;l.message={};l.isDisabled=false;n(function(){alert("Please noted that it is prohibited to give out your contact (Telephone number ,LINE ID, email, or facebook contact, etc.) Your account will be banned if you break the rules.\n\nทางเราไม่อนุญาตให้ครูทุกท่านโพสเบอร์ติดต่อ LINE ID, facebook, Email หรือการติดต่อทุกชนิดในช่องที่ไม่ได้สำหรับให้กรอกสิ่งเหล่านี้ ถ้าฝ่าฝืนจะถูกแบนแอคเคานท์ทันที ขออภัยในความไม่สะดวก")},2e3);l.onSubmit=function(){l.formError="";if(!l.formData.name||!l.formData.subject||!l.formData.price||!l.formData.shortDescription||!l.formData.courseDescription||!l.formData.time||!l.formData.province||!l.formData.location||!l.formData.category||!l.formData.courseLength){l.formError="All fields required, please try again";return false}else{var e=l.formData;l.doAddCoach(e)}};var d=new Date;var p=d.toISOString();l.doAddCoach=function(t){e.createCoach({createdDate:p,name:t.name,price:t.price,subject:t.subject,shortDescription:t.shortDescription,courseDescription:t.courseDescription,preparation:t.preparation,group:t.group,time:t.time,courseLength:t.courseLength,level:t.level,location:t.location,province:t.province,category:t.category,videoid:t.videoid,createdBy:m}).then(function(e){l.isDisabled=true;l.message.success=true;n(function(){l.message.success=false},2e3);n(function(){o.go("/")},2e3);n(function(){a.location.reload()},2500)}).catch(function(e){var t=Object.keys(e).map(function(t){return e[t]});l.formError="Your course has not been added, try again. Possible from duplicate data."});return false};l.resetForm=function(){l.addCoach.$setPristine()};t.beforeResizingImages=function(e){c.show("picturespinner")};t.afterResizingImages=function(e){c.hide("picturespinner")};t.uploadPic=function(e){alert("เมื่อ upload หรือเปลี่ยนรูปใหม่เสร็จ ต้องทำการ submit แบบฟอร์มทั้งหมดที่ปุ่ม Submit ด้านล่างสุดบรรทัดสุดท้ายด้วยทุกครั้ง\nEverytime you finish upload or change the new picture. Please submit the whole form via the button beneath last line");Promise.resolve(s).then(function(e){return e}).then(function(o){r.upload({url:"https://matchthecoach.s3.amazonaws.com",method:"POST",data:{key:"coaches/"+p,AWSAccessKeyId:o.s3AccessKeyId,acl:"public-read",policy:o.s3Policy,signature:o.s3Signature,"Content-Type":e.type!=""?e.type:"application/octet-stream",filename:e.name,file:e}}).then(function(e){n(function(){t.result=e.data})},function(e){if(e.status>0)t.errorMsg=e.status+":"+e.data},function(e){t.progress=Math.min(100,parseInt(100*e.loaded/e.total))}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}}}})();(function(){angular.module("mtcApp").component("navigation",{restrict:"EA",templateUrl:"common/navigationAndfooter/navigation.template.html",controller:"loginController",controllerAs:"lgin"})})();(function(){angular.module("mtcApp").component("footerGeneric",{templateUrl:"/common/navigationAndfooter/footerGeneric.template.html"})})();(function(){angular.module("mtcApp").component("landing",{restrict:"EA",templateUrl:"/home/landing.template.html",controller:"loginController",controllerAs:"lgin"})})();(function(){angular.module("mtcApp").controller("SearchBoxController",e);e.$inject=["$state","mtcData","$timeout","Restangular"];if(window.location.pathname!=="/"){window.location.href="/#"+window.location.pathname}function e(e,t,o,n){this.$onInit=function(){var o=this;o.text="";o.onSelect=function(e,t,n){o.$item=e;o.$model=t;o.$label=n};o.onSubmit=function(t){if(o.text!==""){e.go("search",{text:o.text})}};o.searching=function(e){return n.all("coaches").all("searchCat").getList({text:e})};a();function a(){t.allCats().then(function(e){o.data={cat:e}}).catch(function(e){o.message="Sorry, something's gone wrong"})}o.addModel=function(t){o.text=t;e.go("search",{text:o.text})}}}})();(function(){angular.module("mtcApp").component("searchbox",{restrict:"E",templateUrl:"/common/searchbox/searchbox.template.html",bindings:{text:"<"},controller:"SearchBoxController",controllerAs:"vm"})})();(function(){angular.module("mtcApp").factory("awsPolicy",e);e.$inject=["$http","$log"];function e(e,t){var o=function(){return e.get("/api/awsPolicy").then(function(e){return e.data}).catch(function(e){console.log(e)})};return{getSign:o}}})();(function(){angular.module("mtcApp").controller("loginController",e);e.$inject=["authService","$translate","$rootScope","$scope","$state","$timeout","$uibModal"];function e(e,t,o,n,a,r,i){this.$onInit=function(){var n=this;n.authService=e;n.changeLanguage=function(e){t.use(e)};n.getSubscription=o.isSubscribed;n.serviceSubscription=o.authService.userSubscription;n.isAuthenticated=o.isAuthenticated;n.localStorageSubscription=localStorage.getItem("subscription");r(function(){n.getSubscription=o.isSubscribed},1e3);o.$on("userProfileSet",function(e,t){n.isAuthenticated=o.isAuthenticated;n.profile=t});o.$on("subscriptionSet",function(e,t){r(function(){n.getSubscription=o.isSubscribed},1e3)});var c=localStorage.getItem("profile");if(c){n.profile=angular.fromJson(c)}var l=new Auth0Lock("2m8hbwYC8UdyjITdKGDptrRvF6BXweY7","royyak.auth0.com");l.on("authenticated",function(e){l.getProfile(e.idToken,function(t,o){if(t){console.log(t);return}if(o){localStorage.setItem("id_token",e.idToken);localStorage.setItem("profile",JSON.stringify(profile))}return})});n.addCoach=function(){var e=localStorage.getItem("subscription");if(e=="false"){alert($filter("translate")("PROFILE.ALERT"));a.go("subscription")}else if(e=="true"){a.go("addCoach")}};n.student=function(){localStorage.setItem("role","student");e.login()};n.teacher=function(){localStorage.setItem("role","teacher");a.go("become")};n.becomeCoach=function(){if(o.isAuthenticated===false){e.login()}else if(o.isAuthenticated===true){a.go("profile.bio")}};n.popupHelp=function(){var e=i.open({templateUrl:"/home/helpModal.view.html"});e.result.then(function(e){console.log("Help")})}}}})();(function(){angular.module("mtcApp").factory("metadataService",e);e.$inject=["$http","$rootScope","$window"];function e(t,o,n){var a=this;var r=document.getElementsByTagName("meta");var i=function(e){a.title=document.title=angular.isDefined(e.title)?e.title||"Match The Coach":"";a.description=r.description.content=angular.isDefined(e.description)?e.description||"Match The Coach":""};return{loadMetadata:i,restrict:"A",scope:{metaproperty:"@"},link:function t(o,n,a){o.default=n.attr("content");o.metadata=e;o.$watch("metadata",function(e,t){r(e)},true);function r(e){var t=e[o.metaproperty]||o.default;n.attr("content",t)}r(o.metadata)}}}})();(function(){angular.module("mtcApp").filter("addHtmlLineBreaks",e);function e(){return function(e){var t=angular.isDefined(e)?e.replace(/\n/g,"<br/>"):"";return t}}})();